!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Zappar=t():e.Zappar=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(12),i=n(1);let a;function o(){return a||(a=r.initialize()),a}t.z=o,t.cameraDefaultDeviceID=function(e){return o().camera_default_device_id(e||!1)},t.invert=function(e){let t=i.mat4.create();return i.mat4.invert(t,e),t},t.projectionMatrixFromCameraModel=function(e,t,n){return o().projection_matrix_from_camera_model(e,t,n)},t.drawPlane=function(e,t,n,r,i){o().draw_plane(e,t,n,r,i)}},function(e,t,n){"use strict";n.r(t),n.d(t,"glMatrix",(function(){return r})),n.d(t,"mat2",(function(){return i})),n.d(t,"mat2d",(function(){return a})),n.d(t,"mat3",(function(){return o})),n.d(t,"mat4",(function(){return s})),n.d(t,"quat",(function(){return f})),n.d(t,"quat2",(function(){return _})),n.d(t,"vec2",(function(){return l})),n.d(t,"vec3",(function(){return u})),n.d(t,"vec4",(function(){return c}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return d})),n.d(r,"ARRAY_TYPE",(function(){return h})),n.d(r,"RANDOM",(function(){return m})),n.d(r,"setMatrixArrayType",(function(){return p})),n.d(r,"toRadian",(function(){return y})),n.d(r,"equals",(function(){return g}));var i={};n.r(i),n.d(i,"create",(function(){return v})),n.d(i,"clone",(function(){return w})),n.d(i,"copy",(function(){return M})),n.d(i,"identity",(function(){return x})),n.d(i,"fromValues",(function(){return A})),n.d(i,"set",(function(){return E})),n.d(i,"transpose",(function(){return T})),n.d(i,"invert",(function(){return k})),n.d(i,"adjoint",(function(){return z})),n.d(i,"determinant",(function(){return F})),n.d(i,"multiply",(function(){return S})),n.d(i,"rotate",(function(){return L})),n.d(i,"scale",(function(){return R})),n.d(i,"fromRotation",(function(){return O})),n.d(i,"fromScaling",(function(){return C})),n.d(i,"str",(function(){return P})),n.d(i,"frob",(function(){return I})),n.d(i,"LDU",(function(){return B})),n.d(i,"add",(function(){return D})),n.d(i,"subtract",(function(){return U})),n.d(i,"exactEquals",(function(){return V})),n.d(i,"equals",(function(){return j})),n.d(i,"multiplyScalar",(function(){return N})),n.d(i,"multiplyScalarAndAdd",(function(){return q})),n.d(i,"mul",(function(){return G})),n.d(i,"sub",(function(){return W}));var a={};n.r(a),n.d(a,"create",(function(){return H})),n.d(a,"clone",(function(){return Y})),n.d(a,"copy",(function(){return X})),n.d(a,"identity",(function(){return Z})),n.d(a,"fromValues",(function(){return K})),n.d(a,"set",(function(){return Q})),n.d(a,"invert",(function(){return J})),n.d(a,"determinant",(function(){return $})),n.d(a,"multiply",(function(){return ee})),n.d(a,"rotate",(function(){return te})),n.d(a,"scale",(function(){return ne})),n.d(a,"translate",(function(){return re})),n.d(a,"fromRotation",(function(){return ie})),n.d(a,"fromScaling",(function(){return ae})),n.d(a,"fromTranslation",(function(){return oe})),n.d(a,"str",(function(){return se})),n.d(a,"frob",(function(){return ue})),n.d(a,"add",(function(){return ce})),n.d(a,"subtract",(function(){return fe})),n.d(a,"multiplyScalar",(function(){return _e})),n.d(a,"multiplyScalarAndAdd",(function(){return le})),n.d(a,"exactEquals",(function(){return de})),n.d(a,"equals",(function(){return he})),n.d(a,"mul",(function(){return me})),n.d(a,"sub",(function(){return pe}));var o={};n.r(o),n.d(o,"create",(function(){return be})),n.d(o,"fromMat4",(function(){return ye})),n.d(o,"clone",(function(){return ge})),n.d(o,"copy",(function(){return ve})),n.d(o,"fromValues",(function(){return we})),n.d(o,"set",(function(){return Me})),n.d(o,"identity",(function(){return xe})),n.d(o,"transpose",(function(){return Ae})),n.d(o,"invert",(function(){return Ee})),n.d(o,"adjoint",(function(){return Te})),n.d(o,"determinant",(function(){return ke})),n.d(o,"multiply",(function(){return ze})),n.d(o,"translate",(function(){return Fe})),n.d(o,"rotate",(function(){return Se})),n.d(o,"scale",(function(){return Le})),n.d(o,"fromTranslation",(function(){return Re})),n.d(o,"fromRotation",(function(){return Oe})),n.d(o,"fromScaling",(function(){return Ce})),n.d(o,"fromMat2d",(function(){return Pe})),n.d(o,"fromQuat",(function(){return Ie})),n.d(o,"normalFromMat4",(function(){return Be})),n.d(o,"projection",(function(){return De})),n.d(o,"str",(function(){return Ue})),n.d(o,"frob",(function(){return Ve})),n.d(o,"add",(function(){return je})),n.d(o,"subtract",(function(){return Ne})),n.d(o,"multiplyScalar",(function(){return qe})),n.d(o,"multiplyScalarAndAdd",(function(){return Ge})),n.d(o,"exactEquals",(function(){return We})),n.d(o,"equals",(function(){return He})),n.d(o,"mul",(function(){return Ye})),n.d(o,"sub",(function(){return Xe}));var s={};n.r(s),n.d(s,"create",(function(){return Ze})),n.d(s,"clone",(function(){return Ke})),n.d(s,"copy",(function(){return Qe})),n.d(s,"fromValues",(function(){return Je})),n.d(s,"set",(function(){return $e})),n.d(s,"identity",(function(){return et})),n.d(s,"transpose",(function(){return tt})),n.d(s,"invert",(function(){return nt})),n.d(s,"adjoint",(function(){return rt})),n.d(s,"determinant",(function(){return it})),n.d(s,"multiply",(function(){return at})),n.d(s,"translate",(function(){return ot})),n.d(s,"scale",(function(){return st})),n.d(s,"rotate",(function(){return ut})),n.d(s,"rotateX",(function(){return ct})),n.d(s,"rotateY",(function(){return ft})),n.d(s,"rotateZ",(function(){return _t})),n.d(s,"fromTranslation",(function(){return lt})),n.d(s,"fromScaling",(function(){return dt})),n.d(s,"fromRotation",(function(){return ht})),n.d(s,"fromXRotation",(function(){return mt})),n.d(s,"fromYRotation",(function(){return pt})),n.d(s,"fromZRotation",(function(){return bt})),n.d(s,"fromRotationTranslation",(function(){return yt})),n.d(s,"fromQuat2",(function(){return gt})),n.d(s,"getTranslation",(function(){return vt})),n.d(s,"getScaling",(function(){return wt})),n.d(s,"getRotation",(function(){return Mt})),n.d(s,"fromRotationTranslationScale",(function(){return xt})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return At})),n.d(s,"fromQuat",(function(){return Et})),n.d(s,"frustum",(function(){return Tt})),n.d(s,"perspective",(function(){return kt})),n.d(s,"perspectiveFromFieldOfView",(function(){return zt})),n.d(s,"ortho",(function(){return Ft})),n.d(s,"lookAt",(function(){return St})),n.d(s,"targetTo",(function(){return Lt})),n.d(s,"str",(function(){return Rt})),n.d(s,"frob",(function(){return Ot})),n.d(s,"add",(function(){return Ct})),n.d(s,"subtract",(function(){return Pt})),n.d(s,"multiplyScalar",(function(){return It})),n.d(s,"multiplyScalarAndAdd",(function(){return Bt})),n.d(s,"exactEquals",(function(){return Dt})),n.d(s,"equals",(function(){return Ut})),n.d(s,"mul",(function(){return Vt})),n.d(s,"sub",(function(){return jt}));var u={};n.r(u),n.d(u,"create",(function(){return Nt})),n.d(u,"clone",(function(){return qt})),n.d(u,"length",(function(){return Gt})),n.d(u,"fromValues",(function(){return Wt})),n.d(u,"copy",(function(){return Ht})),n.d(u,"set",(function(){return Yt})),n.d(u,"add",(function(){return Xt})),n.d(u,"subtract",(function(){return Zt})),n.d(u,"multiply",(function(){return Kt})),n.d(u,"divide",(function(){return Qt})),n.d(u,"ceil",(function(){return Jt})),n.d(u,"floor",(function(){return $t})),n.d(u,"min",(function(){return en})),n.d(u,"max",(function(){return tn})),n.d(u,"round",(function(){return nn})),n.d(u,"scale",(function(){return rn})),n.d(u,"scaleAndAdd",(function(){return an})),n.d(u,"distance",(function(){return on})),n.d(u,"squaredDistance",(function(){return sn})),n.d(u,"squaredLength",(function(){return un})),n.d(u,"negate",(function(){return cn})),n.d(u,"inverse",(function(){return fn})),n.d(u,"normalize",(function(){return _n})),n.d(u,"dot",(function(){return ln})),n.d(u,"cross",(function(){return dn})),n.d(u,"lerp",(function(){return hn})),n.d(u,"hermite",(function(){return mn})),n.d(u,"bezier",(function(){return pn})),n.d(u,"random",(function(){return bn})),n.d(u,"transformMat4",(function(){return yn})),n.d(u,"transformMat3",(function(){return gn})),n.d(u,"transformQuat",(function(){return vn})),n.d(u,"rotateX",(function(){return wn})),n.d(u,"rotateY",(function(){return Mn})),n.d(u,"rotateZ",(function(){return xn})),n.d(u,"angle",(function(){return An})),n.d(u,"zero",(function(){return En})),n.d(u,"str",(function(){return Tn})),n.d(u,"exactEquals",(function(){return kn})),n.d(u,"equals",(function(){return zn})),n.d(u,"sub",(function(){return Sn})),n.d(u,"mul",(function(){return Ln})),n.d(u,"div",(function(){return Rn})),n.d(u,"dist",(function(){return On})),n.d(u,"sqrDist",(function(){return Cn})),n.d(u,"len",(function(){return Pn})),n.d(u,"sqrLen",(function(){return In})),n.d(u,"forEach",(function(){return Bn}));var c={};n.r(c),n.d(c,"create",(function(){return Dn})),n.d(c,"clone",(function(){return Un})),n.d(c,"fromValues",(function(){return Vn})),n.d(c,"copy",(function(){return jn})),n.d(c,"set",(function(){return Nn})),n.d(c,"add",(function(){return qn})),n.d(c,"subtract",(function(){return Gn})),n.d(c,"multiply",(function(){return Wn})),n.d(c,"divide",(function(){return Hn})),n.d(c,"ceil",(function(){return Yn})),n.d(c,"floor",(function(){return Xn})),n.d(c,"min",(function(){return Zn})),n.d(c,"max",(function(){return Kn})),n.d(c,"round",(function(){return Qn})),n.d(c,"scale",(function(){return Jn})),n.d(c,"scaleAndAdd",(function(){return $n})),n.d(c,"distance",(function(){return er})),n.d(c,"squaredDistance",(function(){return tr})),n.d(c,"length",(function(){return nr})),n.d(c,"squaredLength",(function(){return rr})),n.d(c,"negate",(function(){return ir})),n.d(c,"inverse",(function(){return ar})),n.d(c,"normalize",(function(){return or})),n.d(c,"dot",(function(){return sr})),n.d(c,"cross",(function(){return ur})),n.d(c,"lerp",(function(){return cr})),n.d(c,"random",(function(){return fr})),n.d(c,"transformMat4",(function(){return _r})),n.d(c,"transformQuat",(function(){return lr})),n.d(c,"zero",(function(){return dr})),n.d(c,"str",(function(){return hr})),n.d(c,"exactEquals",(function(){return mr})),n.d(c,"equals",(function(){return pr})),n.d(c,"sub",(function(){return br})),n.d(c,"mul",(function(){return yr})),n.d(c,"div",(function(){return gr})),n.d(c,"dist",(function(){return vr})),n.d(c,"sqrDist",(function(){return wr})),n.d(c,"len",(function(){return Mr})),n.d(c,"sqrLen",(function(){return xr})),n.d(c,"forEach",(function(){return Ar}));var f={};n.r(f),n.d(f,"create",(function(){return Er})),n.d(f,"identity",(function(){return Tr})),n.d(f,"setAxisAngle",(function(){return kr})),n.d(f,"getAxisAngle",(function(){return zr})),n.d(f,"getAngle",(function(){return Fr})),n.d(f,"multiply",(function(){return Sr})),n.d(f,"rotateX",(function(){return Lr})),n.d(f,"rotateY",(function(){return Rr})),n.d(f,"rotateZ",(function(){return Or})),n.d(f,"calculateW",(function(){return Cr})),n.d(f,"exp",(function(){return Pr})),n.d(f,"ln",(function(){return Ir})),n.d(f,"pow",(function(){return Br})),n.d(f,"slerp",(function(){return Dr})),n.d(f,"random",(function(){return Ur})),n.d(f,"invert",(function(){return Vr})),n.d(f,"conjugate",(function(){return jr})),n.d(f,"fromMat3",(function(){return Nr})),n.d(f,"fromEuler",(function(){return qr})),n.d(f,"str",(function(){return Gr})),n.d(f,"clone",(function(){return Qr})),n.d(f,"fromValues",(function(){return Jr})),n.d(f,"copy",(function(){return $r})),n.d(f,"set",(function(){return ei})),n.d(f,"add",(function(){return ti})),n.d(f,"mul",(function(){return ni})),n.d(f,"scale",(function(){return ri})),n.d(f,"dot",(function(){return ii})),n.d(f,"lerp",(function(){return ai})),n.d(f,"length",(function(){return oi})),n.d(f,"len",(function(){return si})),n.d(f,"squaredLength",(function(){return ui})),n.d(f,"sqrLen",(function(){return ci})),n.d(f,"normalize",(function(){return fi})),n.d(f,"exactEquals",(function(){return _i})),n.d(f,"equals",(function(){return li})),n.d(f,"rotationTo",(function(){return di})),n.d(f,"sqlerp",(function(){return hi})),n.d(f,"setAxes",(function(){return mi}));var _={};n.r(_),n.d(_,"create",(function(){return pi})),n.d(_,"clone",(function(){return bi})),n.d(_,"fromValues",(function(){return yi})),n.d(_,"fromRotationTranslationValues",(function(){return gi})),n.d(_,"fromRotationTranslation",(function(){return vi})),n.d(_,"fromTranslation",(function(){return wi})),n.d(_,"fromRotation",(function(){return Mi})),n.d(_,"fromMat4",(function(){return xi})),n.d(_,"copy",(function(){return Ai})),n.d(_,"identity",(function(){return Ei})),n.d(_,"set",(function(){return Ti})),n.d(_,"getReal",(function(){return ki})),n.d(_,"getDual",(function(){return zi})),n.d(_,"setReal",(function(){return Fi})),n.d(_,"setDual",(function(){return Si})),n.d(_,"getTranslation",(function(){return Li})),n.d(_,"translate",(function(){return Ri})),n.d(_,"rotateX",(function(){return Oi})),n.d(_,"rotateY",(function(){return Ci})),n.d(_,"rotateZ",(function(){return Pi})),n.d(_,"rotateByQuatAppend",(function(){return Ii})),n.d(_,"rotateByQuatPrepend",(function(){return Bi})),n.d(_,"rotateAroundAxis",(function(){return Di})),n.d(_,"add",(function(){return Ui})),n.d(_,"multiply",(function(){return Vi})),n.d(_,"mul",(function(){return ji})),n.d(_,"scale",(function(){return Ni})),n.d(_,"dot",(function(){return qi})),n.d(_,"lerp",(function(){return Gi})),n.d(_,"invert",(function(){return Wi})),n.d(_,"conjugate",(function(){return Hi})),n.d(_,"length",(function(){return Yi})),n.d(_,"len",(function(){return Xi})),n.d(_,"squaredLength",(function(){return Zi})),n.d(_,"sqrLen",(function(){return Ki})),n.d(_,"normalize",(function(){return Qi})),n.d(_,"str",(function(){return Ji})),n.d(_,"exactEquals",(function(){return $i})),n.d(_,"equals",(function(){return ea}));var l={};n.r(l),n.d(l,"create",(function(){return ta})),n.d(l,"clone",(function(){return na})),n.d(l,"fromValues",(function(){return ra})),n.d(l,"copy",(function(){return ia})),n.d(l,"set",(function(){return aa})),n.d(l,"add",(function(){return oa})),n.d(l,"subtract",(function(){return sa})),n.d(l,"multiply",(function(){return ua})),n.d(l,"divide",(function(){return ca})),n.d(l,"ceil",(function(){return fa})),n.d(l,"floor",(function(){return _a})),n.d(l,"min",(function(){return la})),n.d(l,"max",(function(){return da})),n.d(l,"round",(function(){return ha})),n.d(l,"scale",(function(){return ma})),n.d(l,"scaleAndAdd",(function(){return pa})),n.d(l,"distance",(function(){return ba})),n.d(l,"squaredDistance",(function(){return ya})),n.d(l,"length",(function(){return ga})),n.d(l,"squaredLength",(function(){return va})),n.d(l,"negate",(function(){return wa})),n.d(l,"inverse",(function(){return Ma})),n.d(l,"normalize",(function(){return xa})),n.d(l,"dot",(function(){return Aa})),n.d(l,"cross",(function(){return Ea})),n.d(l,"lerp",(function(){return Ta})),n.d(l,"random",(function(){return ka})),n.d(l,"transformMat2",(function(){return za})),n.d(l,"transformMat2d",(function(){return Fa})),n.d(l,"transformMat3",(function(){return Sa})),n.d(l,"transformMat4",(function(){return La})),n.d(l,"rotate",(function(){return Ra})),n.d(l,"angle",(function(){return Oa})),n.d(l,"zero",(function(){return Ca})),n.d(l,"str",(function(){return Pa})),n.d(l,"exactEquals",(function(){return Ia})),n.d(l,"equals",(function(){return Ba})),n.d(l,"len",(function(){return Da})),n.d(l,"sub",(function(){return Ua})),n.d(l,"mul",(function(){return Va})),n.d(l,"div",(function(){return ja})),n.d(l,"dist",(function(){return Na})),n.d(l,"sqrDist",(function(){return qa})),n.d(l,"sqrLen",(function(){return Ga})),n.d(l,"forEach",(function(){return Wa}));var d=1e-6,h="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function p(e){h=e}var b=Math.PI/180;function y(e){return e*b}function g(e,t){return Math.abs(e-t)<=d*Math.max(1,Math.abs(e),Math.abs(t))}function v(){var e=new h(4);return h!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function w(e){var t=new h(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function A(e,t,n,r){var i=new h(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function E(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function T(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function k(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(o=1/o,e[0]=a*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}function z(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function F(e){return e[0]*e[3]-e[2]*e[1]}function S(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],c=n[2],f=n[3];return e[0]=r*s+a*u,e[1]=i*s+o*u,e[2]=r*c+a*f,e[3]=i*c+o*f,e}function L(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=r*-s+a*u,e[3]=i*-s+o*u,e}function R(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=a*u,e[3]=o*u,e}function O(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function C(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function P(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function I(e){return Math.hypot(e[0],e[1],e[2],e[3])}function B(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function D(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function U(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function V(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function j(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}function N(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function q(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var G=S,W=U;function H(){var e=new h(6);return h!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function Y(e){var t=new h(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function X(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Z(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function K(e,t,n,r,i,a){var o=new h(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o}function Q(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e}function J(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=n*a-r*i;return u?(u=1/u,e[0]=a*u,e[1]=-r*u,e[2]=-i*u,e[3]=n*u,e[4]=(i*s-a*o)*u,e[5]=(r*o-n*s)*u,e):null}function $(e){return e[0]*e[3]-e[1]*e[2]}function ee(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],f=n[1],_=n[2],l=n[3],d=n[4],h=n[5];return e[0]=r*c+a*f,e[1]=i*c+o*f,e[2]=r*_+a*l,e[3]=i*_+o*l,e[4]=r*d+a*h+s,e[5]=i*d+o*h+u,e}function te(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=Math.sin(n),f=Math.cos(n);return e[0]=r*f+a*c,e[1]=i*f+o*c,e[2]=r*-c+a*f,e[3]=i*-c+o*f,e[4]=s,e[5]=u,e}function ne(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],f=n[1];return e[0]=r*c,e[1]=i*c,e[2]=a*f,e[3]=o*f,e[4]=s,e[5]=u,e}function re(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*c+a*f+s,e[5]=i*c+o*f+u,e}function ie(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function ae(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function oe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function se(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function ue(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function ce(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function fe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function _e(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function le(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function de(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function he(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=t[0],c=t[1],f=t[2],_=t[3],l=t[4],h=t[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=d*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-_)<=d*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-l)<=d*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-h)<=d*Math.max(1,Math.abs(s),Math.abs(h))}var me=ee,pe=fe;function be(){var e=new h(9);return h!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ge(e){var t=new h(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function we(e,t,n,r,i,a,o,s,u){var c=new h(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=u,c}function Me(e,t,n,r,i,a,o,s,u,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=c,e}function xe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ae(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Ee(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],_=f*o-s*c,l=-f*a+s*u,d=c*a-o*u,h=n*_+r*l+i*d;return h?(h=1/h,e[0]=_*h,e[1]=(-f*r+i*c)*h,e[2]=(s*r-i*o)*h,e[3]=l*h,e[4]=(f*n-i*u)*h,e[5]=(-s*n+i*a)*h,e[6]=d*h,e[7]=(-c*n+r*u)*h,e[8]=(o*n-r*a)*h,e):null}function Te(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8];return e[0]=o*f-s*c,e[1]=i*c-r*f,e[2]=r*s-i*o,e[3]=s*u-a*f,e[4]=n*f-i*u,e[5]=i*a-n*s,e[6]=a*c-o*u,e[7]=r*u-n*c,e[8]=n*o-r*a,e}function ke(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*(c*a-o*u)+n*(-c*i+o*s)+r*(u*i-a*s)}function ze(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=t[8],l=n[0],d=n[1],h=n[2],m=n[3],p=n[4],b=n[5],y=n[6],g=n[7],v=n[8];return e[0]=l*r+d*o+h*c,e[1]=l*i+d*s+h*f,e[2]=l*a+d*u+h*_,e[3]=m*r+p*o+b*c,e[4]=m*i+p*s+b*f,e[5]=m*a+p*u+b*_,e[6]=y*r+g*o+v*c,e[7]=y*i+g*s+v*f,e[8]=y*a+g*u+v*_,e}function Fe(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=t[8],l=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l*r+d*o+c,e[7]=l*i+d*s+f,e[8]=l*a+d*u+_,e}function Se(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=t[8],l=Math.sin(n),d=Math.cos(n);return e[0]=d*r+l*o,e[1]=d*i+l*s,e[2]=d*a+l*u,e[3]=d*o-l*r,e[4]=d*s-l*i,e[5]=d*u-l*a,e[6]=c,e[7]=f,e[8]=_,e}function Le(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Re(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Oe(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ce(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Pe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Ie(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,f=r*o,_=r*s,l=i*o,d=i*s,h=i*u,m=a*o,p=a*s,b=a*u;return e[0]=1-_-h,e[3]=f-b,e[6]=l+p,e[1]=f+b,e[4]=1-c-h,e[7]=d-m,e[2]=l-p,e[5]=d+m,e[8]=1-c-_,e}function Be(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],_=t[9],l=t[10],d=t[11],h=t[12],m=t[13],p=t[14],b=t[15],y=n*s-r*o,g=n*u-i*o,v=n*c-a*o,w=r*u-i*s,M=r*c-a*s,x=i*c-a*u,A=f*m-_*h,E=f*p-l*h,T=f*b-d*h,k=_*p-l*m,z=_*b-d*m,F=l*b-d*p,S=y*F-g*z+v*k+w*T-M*E+x*A;return S?(S=1/S,e[0]=(s*F-u*z+c*k)*S,e[1]=(u*T-o*F-c*E)*S,e[2]=(o*z-s*T+c*A)*S,e[3]=(i*z-r*F-a*k)*S,e[4]=(n*F-i*T+a*E)*S,e[5]=(r*T-n*z-a*A)*S,e[6]=(m*x-p*M+b*w)*S,e[7]=(p*v-h*x-b*g)*S,e[8]=(h*M-m*v+b*y)*S,e):null}function De(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Ue(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ve(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function je(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Ne(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function qe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Ge(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function We(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function He(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],_=t[0],l=t[1],h=t[2],m=t[3],p=t[4],b=t[5],y=t[6],g=t[7],v=t[8];return Math.abs(n-_)<=d*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-b)<=d*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-y)<=d*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-v)<=d*Math.max(1,Math.abs(f),Math.abs(v))}var Ye=ze,Xe=Ne;function Ze(){var e=new h(16);return h!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ke(e){var t=new h(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Qe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Je(e,t,n,r,i,a,o,s,u,c,f,_,l,d,m,p){var b=new h(16);return b[0]=e,b[1]=t,b[2]=n,b[3]=r,b[4]=i,b[5]=a,b[6]=o,b[7]=s,b[8]=u,b[9]=c,b[10]=f,b[11]=_,b[12]=l,b[13]=d,b[14]=m,b[15]=p,b}function $e(e,t,n,r,i,a,o,s,u,c,f,_,l,d,h,m,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=c,e[9]=f,e[10]=_,e[11]=l,e[12]=d,e[13]=h,e[14]=m,e[15]=p,e}function et(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function nt(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],_=t[9],l=t[10],d=t[11],h=t[12],m=t[13],p=t[14],b=t[15],y=n*s-r*o,g=n*u-i*o,v=n*c-a*o,w=r*u-i*s,M=r*c-a*s,x=i*c-a*u,A=f*m-_*h,E=f*p-l*h,T=f*b-d*h,k=_*p-l*m,z=_*b-d*m,F=l*b-d*p,S=y*F-g*z+v*k+w*T-M*E+x*A;return S?(S=1/S,e[0]=(s*F-u*z+c*k)*S,e[1]=(i*z-r*F-a*k)*S,e[2]=(m*x-p*M+b*w)*S,e[3]=(l*M-_*x-d*w)*S,e[4]=(u*T-o*F-c*E)*S,e[5]=(n*F-i*T+a*E)*S,e[6]=(p*v-h*x-b*g)*S,e[7]=(f*x-l*v+d*g)*S,e[8]=(o*z-s*T+c*A)*S,e[9]=(r*T-n*z-a*A)*S,e[10]=(h*M-m*v+b*y)*S,e[11]=(_*v-f*M-d*y)*S,e[12]=(s*E-o*k-u*A)*S,e[13]=(n*k-r*E+i*A)*S,e[14]=(m*g-h*w-p*y)*S,e[15]=(f*w-_*g+l*y)*S,e):null}function rt(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],_=t[9],l=t[10],d=t[11],h=t[12],m=t[13],p=t[14],b=t[15];return e[0]=s*(l*b-d*p)-_*(u*b-c*p)+m*(u*d-c*l),e[1]=-(r*(l*b-d*p)-_*(i*b-a*p)+m*(i*d-a*l)),e[2]=r*(u*b-c*p)-s*(i*b-a*p)+m*(i*c-a*u),e[3]=-(r*(u*d-c*l)-s*(i*d-a*l)+_*(i*c-a*u)),e[4]=-(o*(l*b-d*p)-f*(u*b-c*p)+h*(u*d-c*l)),e[5]=n*(l*b-d*p)-f*(i*b-a*p)+h*(i*d-a*l),e[6]=-(n*(u*b-c*p)-o*(i*b-a*p)+h*(i*c-a*u)),e[7]=n*(u*d-c*l)-o*(i*d-a*l)+f*(i*c-a*u),e[8]=o*(_*b-d*m)-f*(s*b-c*m)+h*(s*d-c*_),e[9]=-(n*(_*b-d*m)-f*(r*b-a*m)+h*(r*d-a*_)),e[10]=n*(s*b-c*m)-o*(r*b-a*m)+h*(r*c-a*s),e[11]=-(n*(s*d-c*_)-o*(r*d-a*_)+f*(r*c-a*s)),e[12]=-(o*(_*p-l*m)-f*(s*p-u*m)+h*(s*l-u*_)),e[13]=n*(_*p-l*m)-f*(r*p-i*m)+h*(r*l-i*_),e[14]=-(n*(s*p-u*m)-o*(r*p-i*m)+h*(r*u-i*s)),e[15]=n*(s*l-u*_)-o*(r*l-i*_)+f*(r*u-i*s),e}function it(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],f=e[9],_=e[10],l=e[11],d=e[12],h=e[13],m=e[14],p=e[15];return(t*o-n*a)*(_*p-l*m)-(t*s-r*a)*(f*p-l*h)+(t*u-i*a)*(f*m-_*h)+(n*s-r*o)*(c*p-l*d)-(n*u-i*o)*(c*m-_*d)+(r*u-i*s)*(c*h-f*d)}function at(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=t[8],l=t[9],d=t[10],h=t[11],m=t[12],p=t[13],b=t[14],y=t[15],g=n[0],v=n[1],w=n[2],M=n[3];return e[0]=g*r+v*s+w*_+M*m,e[1]=g*i+v*u+w*l+M*p,e[2]=g*a+v*c+w*d+M*b,e[3]=g*o+v*f+w*h+M*y,g=n[4],v=n[5],w=n[6],M=n[7],e[4]=g*r+v*s+w*_+M*m,e[5]=g*i+v*u+w*l+M*p,e[6]=g*a+v*c+w*d+M*b,e[7]=g*o+v*f+w*h+M*y,g=n[8],v=n[9],w=n[10],M=n[11],e[8]=g*r+v*s+w*_+M*m,e[9]=g*i+v*u+w*l+M*p,e[10]=g*a+v*c+w*d+M*b,e[11]=g*o+v*f+w*h+M*y,g=n[12],v=n[13],w=n[14],M=n[15],e[12]=g*r+v*s+w*_+M*m,e[13]=g*i+v*u+w*l+M*p,e[14]=g*a+v*c+w*d+M*b,e[15]=g*o+v*f+w*h+M*y,e}function ot(e,t,n){var r,i,a,o,s,u,c,f,_,l,d,h,m=n[0],p=n[1],b=n[2];return t===e?(e[12]=t[0]*m+t[4]*p+t[8]*b+t[12],e[13]=t[1]*m+t[5]*p+t[9]*b+t[13],e[14]=t[2]*m+t[6]*p+t[10]*b+t[14],e[15]=t[3]*m+t[7]*p+t[11]*b+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=t[8],l=t[9],d=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=f,e[8]=_,e[9]=l,e[10]=d,e[11]=h,e[12]=r*m+s*p+_*b+t[12],e[13]=i*m+u*p+l*b+t[13],e[14]=a*m+c*p+d*b+t[14],e[15]=o*m+f*p+h*b+t[15]),e}function st(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ut(e,t,n,r){var i,a,o,s,u,c,f,_,l,h,m,p,b,y,g,v,w,M,x,A,E,T,k,z,F=r[0],S=r[1],L=r[2],R=Math.hypot(F,S,L);return R<d?null:(F*=R=1/R,S*=R,L*=R,i=Math.sin(n),o=1-(a=Math.cos(n)),s=t[0],u=t[1],c=t[2],f=t[3],_=t[4],l=t[5],h=t[6],m=t[7],p=t[8],b=t[9],y=t[10],g=t[11],v=F*F*o+a,w=S*F*o+L*i,M=L*F*o-S*i,x=F*S*o-L*i,A=S*S*o+a,E=L*S*o+F*i,T=F*L*o+S*i,k=S*L*o-F*i,z=L*L*o+a,e[0]=s*v+_*w+p*M,e[1]=u*v+l*w+b*M,e[2]=c*v+h*w+y*M,e[3]=f*v+m*w+g*M,e[4]=s*x+_*A+p*E,e[5]=u*x+l*A+b*E,e[6]=c*x+h*A+y*E,e[7]=f*x+m*A+g*E,e[8]=s*T+_*k+p*z,e[9]=u*T+l*k+b*z,e[10]=c*T+h*k+y*z,e[11]=f*T+m*k+g*z,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ct(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],f=t[9],_=t[10],l=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+f*r,e[6]=s*i+_*r,e[7]=u*i+l*r,e[8]=c*i-a*r,e[9]=f*i-o*r,e[10]=_*i-s*r,e[11]=l*i-u*r,e}function ft(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],f=t[9],_=t[10],l=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-f*r,e[2]=s*i-_*r,e[3]=u*i-l*r,e[8]=a*r+c*i,e[9]=o*r+f*i,e[10]=s*r+_*i,e[11]=u*r+l*i,e}function _t(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],f=t[5],_=t[6],l=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+f*r,e[2]=s*i+_*r,e[3]=u*i+l*r,e[4]=c*i-a*r,e[5]=f*i-o*r,e[6]=_*i-s*r,e[7]=l*i-u*r,e}function lt(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function dt(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ht(e,t,n){var r,i,a,o=n[0],s=n[1],u=n[2],c=Math.hypot(o,s,u);return c<d?null:(o*=c=1/c,s*=c,u*=c,r=Math.sin(t),a=1-(i=Math.cos(t)),e[0]=o*o*a+i,e[1]=s*o*a+u*r,e[2]=u*o*a-s*r,e[3]=0,e[4]=o*s*a-u*r,e[5]=s*s*a+i,e[6]=u*s*a+o*r,e[7]=0,e[8]=o*u*a+s*r,e[9]=s*u*a-o*r,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function mt(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pt(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bt(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yt(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,c=a+a,f=r*s,_=r*u,l=r*c,d=i*u,h=i*c,m=a*c,p=o*s,b=o*u,y=o*c;return e[0]=1-(d+m),e[1]=_+y,e[2]=l-b,e[3]=0,e[4]=_-y,e[5]=1-(f+m),e[6]=h+p,e[7]=0,e[8]=l+b,e[9]=h-p,e[10]=1-(f+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function gt(e,t){var n=new h(3),r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=r*r+i*i+a*a+o*o;return _>0?(n[0]=2*(s*o+f*r+u*a-c*i)/_,n[1]=2*(u*o+f*i+c*r-s*a)/_,n[2]=2*(c*o+f*a+s*i-u*r)/_):(n[0]=2*(s*o+f*r+u*a-c*i),n[1]=2*(u*o+f*i+c*r-s*a),n[2]=2*(c*o+f*a+s*i-u*r)),yt(e,t,n),e}function vt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function wt(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],c=t[9],f=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,s),e[2]=Math.hypot(u,c,f),e}function Mt(e,t){var n=new h(3);wt(n,t);var r=1/n[0],i=1/n[1],a=1/n[2],o=t[0]*r,s=t[1]*i,u=t[2]*a,c=t[4]*r,f=t[5]*i,_=t[6]*a,l=t[8]*r,d=t[9]*i,m=t[10]*a,p=o+f+m,b=0;return p>0?(b=2*Math.sqrt(p+1),e[3]=.25*b,e[0]=(_-d)/b,e[1]=(l-u)/b,e[2]=(s-c)/b):o>f&&o>m?(b=2*Math.sqrt(1+o-f-m),e[3]=(_-d)/b,e[0]=.25*b,e[1]=(s+c)/b,e[2]=(l+u)/b):f>m?(b=2*Math.sqrt(1+f-o-m),e[3]=(l-u)/b,e[0]=(s+c)/b,e[1]=.25*b,e[2]=(_+d)/b):(b=2*Math.sqrt(1+m-o-f),e[3]=(s-c)/b,e[0]=(l+u)/b,e[1]=(_+d)/b,e[2]=.25*b),e}function xt(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,c=a+a,f=o+o,_=i*u,l=i*c,d=i*f,h=a*c,m=a*f,p=o*f,b=s*u,y=s*c,g=s*f,v=r[0],w=r[1],M=r[2];return e[0]=(1-(h+p))*v,e[1]=(l+g)*v,e[2]=(d-y)*v,e[3]=0,e[4]=(l-g)*w,e[5]=(1-(_+p))*w,e[6]=(m+b)*w,e[7]=0,e[8]=(d+y)*M,e[9]=(m-b)*M,e[10]=(1-(_+h))*M,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function At(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],u=t[3],c=a+a,f=o+o,_=s+s,l=a*c,d=a*f,h=a*_,m=o*f,p=o*_,b=s*_,y=u*c,g=u*f,v=u*_,w=r[0],M=r[1],x=r[2],A=i[0],E=i[1],T=i[2],k=(1-(m+b))*w,z=(d+v)*w,F=(h-g)*w,S=(d-v)*M,L=(1-(l+b))*M,R=(p+y)*M,O=(h+g)*x,C=(p-y)*x,P=(1-(l+m))*x;return e[0]=k,e[1]=z,e[2]=F,e[3]=0,e[4]=S,e[5]=L,e[6]=R,e[7]=0,e[8]=O,e[9]=C,e[10]=P,e[11]=0,e[12]=n[0]+A-(k*A+S*E+O*T),e[13]=n[1]+E-(z*A+L*E+C*T),e[14]=n[2]+T-(F*A+R*E+P*T),e[15]=1,e}function Et(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,f=r*o,_=r*s,l=i*o,d=i*s,h=i*u,m=a*o,p=a*s,b=a*u;return e[0]=1-_-h,e[1]=f+b,e[2]=l-p,e[3]=0,e[4]=f-b,e[5]=1-c-h,e[6]=d+m,e[7]=0,e[8]=l+p,e[9]=d-m,e[10]=1-c-_,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Tt(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}function kt(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function zt(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Ft(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1,e}function St(e,t,n,r){var i,a,o,s,u,c,f,_,l,h,m=t[0],p=t[1],b=t[2],y=r[0],g=r[1],v=r[2],w=n[0],M=n[1],x=n[2];return Math.abs(m-w)<d&&Math.abs(p-M)<d&&Math.abs(b-x)<d?et(e):(f=m-w,_=p-M,l=b-x,i=g*(l*=h=1/Math.hypot(f,_,l))-v*(_*=h),a=v*(f*=h)-y*l,o=y*_-g*f,(h=Math.hypot(i,a,o))?(i*=h=1/h,a*=h,o*=h):(i=0,a=0,o=0),s=_*o-l*a,u=l*i-f*o,c=f*a-_*i,(h=Math.hypot(s,u,c))?(s*=h=1/h,u*=h,c*=h):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=u,e[6]=_,e[7]=0,e[8]=o,e[9]=c,e[10]=l,e[11]=0,e[12]=-(i*m+a*p+o*b),e[13]=-(s*m+u*p+c*b),e[14]=-(f*m+_*p+l*b),e[15]=1,e)}function Lt(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],u=r[1],c=r[2],f=i-n[0],_=a-n[1],l=o-n[2],d=f*f+_*_+l*l;d>0&&(f*=d=1/Math.sqrt(d),_*=d,l*=d);var h=u*l-c*_,m=c*f-s*l,p=s*_-u*f;return(d=h*h+m*m+p*p)>0&&(h*=d=1/Math.sqrt(d),m*=d,p*=d),e[0]=h,e[1]=m,e[2]=p,e[3]=0,e[4]=_*p-l*m,e[5]=l*h-f*p,e[6]=f*m-_*h,e[7]=0,e[8]=f,e[9]=_,e[10]=l,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function Rt(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Ot(e){return Math.hypot(e[0],e[1],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Ct(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Pt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function It(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Bt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Dt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ut(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],_=e[9],l=e[10],h=e[11],m=e[12],p=e[13],b=e[14],y=e[15],g=t[0],v=t[1],w=t[2],M=t[3],x=t[4],A=t[5],E=t[6],T=t[7],k=t[8],z=t[9],F=t[10],S=t[11],L=t[12],R=t[13],O=t[14],C=t[15];return Math.abs(n-g)<=d*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-v)<=d*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(i-w)<=d*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-M)<=d*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-x)<=d*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-A)<=d*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-E)<=d*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-T)<=d*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-k)<=d*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(_-z)<=d*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(l-F)<=d*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(h-S)<=d*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(m-L)<=d*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(p-R)<=d*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(b-O)<=d*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(y-C)<=d*Math.max(1,Math.abs(y),Math.abs(C))}var Vt=at,jt=Pt;function Nt(){var e=new h(3);return h!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function qt(e){var t=new h(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Gt(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Wt(e,t,n){var r=new h(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ht(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Yt(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Xt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Zt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Kt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Qt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Jt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function $t(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function en(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function tn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function nn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function rn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function an(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function on(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function sn(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function un(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function cn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function fn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function _n(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function ln(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function dn(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function hn(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function mn(e,t,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),f=o*(3-2*a);return e[0]=t[0]*s+n[0]*u+r[0]*c+i[0]*f,e[1]=t[1]*s+n[1]*u+r[1]*c+i[1]*f,e[2]=t[2]*s+n[2]*u+r[2]*c+i[2]*f,e}function pn(e,t,n,r,i,a){var o=1-a,s=o*o,u=a*a,c=s*o,f=3*a*s,_=3*u*o,l=u*a;return e[0]=t[0]*c+n[0]*f+r[0]*_+i[0]*l,e[1]=t[1]*c+n[1]*f+r[1]*_+i[1]*l,e[2]=t[2]*c+n[2]*f+r[2]*_+i[2]*l,e}function bn(e,t){t=t||1;var n=2*m()*Math.PI,r=2*m()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function yn(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function gn(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function vn(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],c=t[2],f=i*c-a*u,_=a*s-r*c,l=r*u-i*s,d=i*l-a*_,h=a*f-r*l,m=r*_-i*f,p=2*o;return f*=p,_*=p,l*=p,d*=2,h*=2,m*=2,e[0]=s+f+d,e[1]=u+_+h,e[2]=c+l+m,e}function wn(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Mn(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function xn(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function An(e,t){var n=Wt(e[0],e[1],e[2]),r=Wt(t[0],t[1],t[2]);_n(n,n),_n(r,r);var i=ln(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function En(e){return e[0]=0,e[1]=0,e[2]=0,e}function Tn(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function kn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function zn(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))}var Fn,Sn=Zt,Ln=Kt,Rn=Qt,On=on,Cn=sn,Pn=Gt,In=un,Bn=(Fn=Nt(),function(e,t,n,r,i,a){var o,s;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,o=n;o<s;o+=t)Fn[0]=e[o],Fn[1]=e[o+1],Fn[2]=e[o+2],i(Fn,Fn,a),e[o]=Fn[0],e[o+1]=Fn[1],e[o+2]=Fn[2];return e});function Dn(){var e=new h(4);return h!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Un(e){var t=new h(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Vn(e,t,n,r){var i=new h(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function jn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Nn(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function qn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Gn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function Wn(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Hn(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Yn(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Xn(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Zn(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Kn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Qn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Jn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function $n(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function er(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.hypot(n,r,i,a)}function tr(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function nr(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)}function rr(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function ir(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function ar(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function or(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o,e}function sr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ur(e,t,n,r){var i=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=t[0],_=t[1],l=t[2],d=t[3];return e[0]=_*c-l*u+d*s,e[1]=-f*c+l*o-d*a,e[2]=f*u-_*o+d*i,e[3]=-f*s+_*a-l*i,e}function cr(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}function fr(e,t){var n,r,i,a,o,s;t=t||1;do{o=(n=2*m()-1)*n+(r=2*m()-1)*r}while(o>=1);do{s=(i=2*m()-1)*i+(a=2*m()-1)*a}while(s>=1);var u=Math.sqrt((1-o)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*i*u,e[3]=t*a*u,e}function _r(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function lr(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*a-u*i,_=c*i+u*r-o*a,l=c*a+o*i-s*r,d=-o*r-s*i-u*a;return e[0]=f*c+d*-o+_*-u-l*-s,e[1]=_*c+d*-s+l*-o-f*-u,e[2]=l*c+d*-u+f*-s-_*-o,e[3]=t[3],e}function dr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function hr(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function mr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function pr(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}var br=Gn,yr=Wn,gr=Hn,vr=er,wr=tr,Mr=nr,xr=rr,Ar=function(){var e=Dn();return function(t,n,r,i,a,o){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function Er(){var e=new h(4);return h!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Tr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function kr(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function zr(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>d?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Fr(e,t){var n=ii(e,t);return Math.acos(2*n*n-1)}function Sr(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],c=n[2],f=n[3];return e[0]=r*f+o*s+i*c-a*u,e[1]=i*f+o*u+a*s-r*c,e[2]=a*f+o*c+r*u-i*s,e[3]=o*f-r*s-i*u-a*c,e}function Lr(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e}function Rr(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s,e}function Or(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e}function Cr(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Pr(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=Math.sqrt(n*n+r*r+i*i),s=Math.exp(a),u=o>0?s*Math.sin(o)/o:0;return e[0]=n*u,e[1]=r*u,e[2]=i*u,e[3]=s*Math.cos(o),e}function Ir(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=Math.sqrt(n*n+r*r+i*i),s=o>0?Math.atan2(o,a)/o:0;return e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=.5*Math.log(n*n+r*r+i*i+a*a),e}function Br(e,t,n){return Ir(e,t),ri(e,e,n),Pr(e,e),e}function Dr(e,t,n,r){var i,a,o,s,u,c=t[0],f=t[1],_=t[2],l=t[3],h=n[0],m=n[1],p=n[2],b=n[3];return(a=c*h+f*m+_*p+l*b)<0&&(a=-a,h=-h,m=-m,p=-p,b=-b),1-a>d?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),e[0]=s*c+u*h,e[1]=s*f+u*m,e[2]=s*_+u*p,e[3]=s*l+u*b,e}function Ur(e){var t=m(),n=m(),r=m(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e}function Vr(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e}function jr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Nr(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*a+o]-t[3*o+a])*n,e[a]=(t[3*a+i]+t[3*i+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e}function qr(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return e[0]=a*u*f-o*s*c,e[1]=o*s*f+a*u*c,e[2]=o*u*c-a*s*f,e[3]=o*u*f+a*s*c,e}function Gr(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Wr,Hr,Yr,Xr,Zr,Kr,Qr=Un,Jr=Vn,$r=jn,ei=Nn,ti=qn,ni=Sr,ri=Jn,ii=sr,ai=cr,oi=nr,si=oi,ui=rr,ci=ui,fi=or,_i=mr,li=pr,di=(Wr=Nt(),Hr=Wt(1,0,0),Yr=Wt(0,1,0),function(e,t,n){var r=ln(t,n);return r<-.999999?(dn(Wr,Hr,t),Pn(Wr)<1e-6&&dn(Wr,Yr,t),_n(Wr,Wr),kr(e,Wr,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(dn(Wr,t,n),e[0]=Wr[0],e[1]=Wr[1],e[2]=Wr[2],e[3]=1+r,fi(e,e))}),hi=(Xr=Er(),Zr=Er(),function(e,t,n,r,i,a){return Dr(Xr,t,i,a),Dr(Zr,n,r,a),Dr(e,Xr,Zr,2*a*(1-a)),e}),mi=(Kr=be(),function(e,t,n,r){return Kr[0]=n[0],Kr[3]=n[1],Kr[6]=n[2],Kr[1]=r[0],Kr[4]=r[1],Kr[7]=r[2],Kr[2]=-t[0],Kr[5]=-t[1],Kr[8]=-t[2],fi(e,Nr(e,Kr))});function pi(){var e=new h(8);return h!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function bi(e){var t=new h(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function yi(e,t,n,r,i,a,o,s){var u=new h(8);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u}function gi(e,t,n,r,i,a,o){var s=new h(8);s[0]=e,s[1]=t,s[2]=n,s[3]=r;var u=.5*i,c=.5*a,f=.5*o;return s[4]=u*r+c*n-f*t,s[5]=c*r+f*e-u*n,s[6]=f*r+u*t-c*e,s[7]=-u*e-c*t-f*n,s}function vi(e,t,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=t[0],s=t[1],u=t[2],c=t[3];return e[0]=o,e[1]=s,e[2]=u,e[3]=c,e[4]=r*c+i*u-a*s,e[5]=i*c+a*o-r*u,e[6]=a*c+r*s-i*o,e[7]=-r*o-i*s-a*u,e}function wi(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function Mi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function xi(e,t){var n=Er();Mt(n,t);var r=new h(3);return vt(r,t),vi(e,n,r),e}function Ai(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Ei(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function Ti(e,t,n,r,i,a,o,s,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e}var ki=$r;function zi(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var Fi=$r;function Si(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Li(e,t){var n=t[4],r=t[5],i=t[6],a=t[7],o=-t[0],s=-t[1],u=-t[2],c=t[3];return e[0]=2*(n*c+a*o+r*u-i*s),e[1]=2*(r*c+a*s+i*o-n*u),e[2]=2*(i*c+a*u+n*s-r*o),e}function Ri(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=t[4],_=t[5],l=t[6],d=t[7];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=o*s+i*c-a*u+f,e[5]=o*u+a*s-r*c+_,e[6]=o*c+r*u-i*s+l,e[7]=-r*s-i*u-a*c+d,e}function Oi(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=s*o+f*r+u*a-c*i,l=u*o+f*i+c*r-s*a,d=c*o+f*a+s*i-u*r,h=f*o-s*r-u*i-c*a;return Lr(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=_*o+h*r+l*a-d*i,e[5]=l*o+h*i+d*r-_*a,e[6]=d*o+h*a+_*i-l*r,e[7]=h*o-_*r-l*i-d*a,e}function Ci(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=s*o+f*r+u*a-c*i,l=u*o+f*i+c*r-s*a,d=c*o+f*a+s*i-u*r,h=f*o-s*r-u*i-c*a;return Rr(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=_*o+h*r+l*a-d*i,e[5]=l*o+h*i+d*r-_*a,e[6]=d*o+h*a+_*i-l*r,e[7]=h*o-_*r-l*i-d*a,e}function Pi(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],_=s*o+f*r+u*a-c*i,l=u*o+f*i+c*r-s*a,d=c*o+f*a+s*i-u*r,h=f*o-s*r-u*i-c*a;return Or(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=_*o+h*r+l*a-d*i,e[5]=l*o+h*i+d*r-_*a,e[6]=d*o+h*a+_*i-l*r,e[7]=h*o-_*r-l*i-d*a,e}function Ii(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],c=t[2],f=t[3];return e[0]=s*o+f*r+u*a-c*i,e[1]=u*o+f*i+c*r-s*a,e[2]=c*o+f*a+s*i-u*r,e[3]=f*o-s*r-u*i-c*a,s=t[4],u=t[5],c=t[6],f=t[7],e[4]=s*o+f*r+u*a-c*i,e[5]=u*o+f*i+c*r-s*a,e[6]=c*o+f*a+s*i-u*r,e[7]=f*o-s*r-u*i-c*a,e}function Bi(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],c=n[2],f=n[3];return e[0]=r*f+o*s+i*c-a*u,e[1]=i*f+o*u+a*s-r*c,e[2]=a*f+o*c+r*u-i*s,e[3]=o*f-r*s-i*u-a*c,s=n[4],u=n[5],c=n[6],f=n[7],e[4]=r*f+o*s+i*c-a*u,e[5]=i*f+o*u+a*s-r*c,e[6]=a*f+o*c+r*u-i*s,e[7]=o*f-r*s-i*u-a*c,e}function Di(e,t,n,r){if(Math.abs(r)<d)return Ai(e,t);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var a=Math.sin(r),o=a*n[0]/i,s=a*n[1]/i,u=a*n[2]/i,c=Math.cos(r),f=t[0],_=t[1],l=t[2],h=t[3];e[0]=f*c+h*o+_*u-l*s,e[1]=_*c+h*s+l*o-f*u,e[2]=l*c+h*u+f*s-_*o,e[3]=h*c-f*o-_*s-l*u;var m=t[4],p=t[5],b=t[6],y=t[7];return e[4]=m*c+y*o+p*u-b*s,e[5]=p*c+y*s+b*o-m*u,e[6]=b*c+y*u+m*s-p*o,e[7]=y*c-m*o-p*s-b*u,e}function Ui(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function Vi(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[4],u=n[5],c=n[6],f=n[7],_=t[4],l=t[5],d=t[6],h=t[7],m=n[0],p=n[1],b=n[2],y=n[3];return e[0]=r*y+o*m+i*b-a*p,e[1]=i*y+o*p+a*m-r*b,e[2]=a*y+o*b+r*p-i*m,e[3]=o*y-r*m-i*p-a*b,e[4]=r*f+o*s+i*c-a*u+_*y+h*m+l*b-d*p,e[5]=i*f+o*u+a*s-r*c+l*y+h*p+d*m-_*b,e[6]=a*f+o*c+r*u-i*s+d*y+h*b+_*p-l*m,e[7]=o*f-r*s-i*u-a*c+h*y-_*m-l*p-d*b,e}var ji=Vi;function Ni(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var qi=ii;function Gi(e,t,n,r){var i=1-r;return qi(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e}function Wi(e,t){var n=Zi(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function Hi(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Yi=oi,Xi=Yi,Zi=ui,Ki=Zi;function Qi(e,t){var n=Zi(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,i=t[1]/n,a=t[2]/n,o=t[3]/n,s=t[4],u=t[5],c=t[6],f=t[7],_=r*s+i*u+a*c+o*f;e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=(s-r*_)/n,e[5]=(u-i*_)/n,e[6]=(c-a*_)/n,e[7]=(f-o*_)/n}return e}function Ji(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function $i(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function ea(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=t[0],_=t[1],l=t[2],h=t[3],m=t[4],p=t[5],b=t[6],y=t[7];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-_)<=d*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-b)<=d*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))}function ta(){var e=new h(2);return h!=Float32Array&&(e[0]=0,e[1]=0),e}function na(e){var t=new h(2);return t[0]=e[0],t[1]=e[1],t}function ra(e,t){var n=new h(2);return n[0]=e,n[1]=t,n}function ia(e,t){return e[0]=t[0],e[1]=t[1],e}function aa(e,t,n){return e[0]=t,e[1]=n,e}function oa(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function sa(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function ua(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function ca(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function fa(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function _a(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function la(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function da(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function ha(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ma(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function pa(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function ba(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function ya(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ga(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function va(e){var t=e[0],n=e[1];return t*t+n*n}function wa(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Ma(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function xa(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function Aa(e,t){return e[0]*t[0]+e[1]*t[1]}function Ea(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function Ta(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e}function ka(e,t){t=t||1;var n=2*m()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function za(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function Fa(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function Sa(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function La(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function Ra(e,t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=Math.sin(r),s=Math.cos(r);return e[0]=i*s-a*o+n[0],e[1]=i*o+a*s+n[1],e}function Oa(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*a)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Ca(e){return e[0]=0,e[1]=0,e}function Pa(e){return"vec2("+e[0]+", "+e[1]+")"}function Ia(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ba(e,t){var n=e[0],r=e[1],i=t[0],a=t[1];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))}var Da=ga,Ua=sa,Va=ua,ja=ca,Na=ba,qa=ya,Ga=va,Wa=function(){var e=ta();return function(t,n,r,i,a,o){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],a(e,e,o),t[s]=e[0],t[s+1]=e[1];return t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileShader=function(e,t,n){let r=e.createShader(t);if(!r)throw new Error("Unable to create shader");e.shaderSource(r,n),e.compileShader(r);let i=e.getShaderInfoLog(r);if(i&&i.length>0)throw new Error("Shader compile error: "+i);return r},t.linkProgram=function(e,t){e.linkProgram(t);let n=e.getProgramInfoLog(t);if(n&&n.length>0)throw new Error("Unable to link: "+n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Event=class{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(){for(var e=0,t=this._funcs.length;e<t;e++)this._funcs[e]()}};t.Event1=class{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(e){for(var t=0,n=this._funcs.length;t<n;t++)this._funcs[t](e)}};t.Event2=class{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(e,t){for(var n=0,r=this._funcs.length;n<r;n++)this._funcs[n](e,t)}};t.Event3=class{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(e,t,n){for(var r=0,i=this._funcs.length;r<i;r++)this._funcs[r](e,t,n)}};t.Event5=class{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(e,t,n,r,i){for(var a=0,o=this._funcs.length;a<o;a++)this._funcs[a](e,t,n,r,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);function i(e){if(window.screen.orientation)switch(window.screen.orientation.type){case"portrait-primary":return e?90:270;case"landscape-secondary":return 180;case"portrait-secondary":return e?270:90;default:return 0}else if(void 0!==window.orientation)switch(window.orientation){case 0:return e?90:270;case 90:return 0;case 180:return e?270:90;case-90:return 180}return 0}t.projectionMatrix=function(e,t,n,a=.01,o=100){let s=2*e[2],u=2*e[3],c=r.mat4.create();r.mat4.frustum(c,a*(-.5-e[2])/e[0],a*(s-.5-e[2])/e[0],a*(u-.5-e[3])/e[1],a*(-.5-e[3])/e[1],a,o),c[4]*=-1,c[5]*=-1,c[6]*=-1,c[7]*=-1;let f=r.mat4.create();r.mat4.fromScaling(f,[.5*s,.5*u,1]),r.mat4.multiply(c,f,c),r.mat4.fromRotation(f,i(!1)*Math.PI/180,[0,0,1]),r.mat4.multiply(c,f,c);let _=r.vec3.create();_[0]=s,_[1]=u,_[2]=0,r.vec3.transformMat4(_,_,f);let l=Math.abs(_[0]),d=Math.abs(_[1]),h=1;return h=l/t>d/n?n/d:t/l,r.mat4.fromScaling(f,[h,h,1]),r.mat4.multiply(c,f,c),r.mat4.fromScaling(f,[2/t,2/n,1]),r.mat4.multiply(c,f,c),r.mat4.fromRotation(f,i(!1)*Math.PI/-180,[0,0,1]),r.mat4.multiply(c,c,f),c},t.cameraRotationForScreenOrientation=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(26),i=n(1),a=n(4),o=n(27),s=n(28);let u=new Map;class c{constructor(e,t,n){this._client=e,this._impl=t,this._mgr=n,this.pendingMessages=[],this.cameraTokens=new Map,this.nextCameraToken=1,this.tokensInFlight=0,this.videoTextures=[],this.cameraPixelArrays=[]}static create(e,t){let n=e.pipeline_create();return u.set(n,new c(e,n,t)),n}static get(e){return u.get(e)}frameUpdate(e){for(let t of this.pendingMessages)e.processMessages(t),this._mgr.postOutgoingMessage({t:"buf",p:this._impl,d:t},[t]);this.pendingMessages=[];let t=this._client.pipeline_camera_frame_user_data(this._impl);if(t)for(let e of this.cameraTokens)e[0]<t&&(this.videoTextures.push(e[1].texture),this.cameraTokens.delete(e[0]))}cameraTokenReturn(e,t){this.cameraPixelArrays.push(t),this.tokensInFlight--}getVideoTexture(){return this.videoTextures.pop()}destroy(){this._client.pipeline_destroy(this._impl),u.delete(this._impl)}getCurrentCameraInfo(){let e=this._client.pipeline_camera_frame_user_data(this._impl);if(e)return this.cameraTokens.get(e)}cameraFrameDrawGL(e,t,n){if(!this.glContext)return;let i=this.getCurrentCameraInfo();i&&(this._cameraDraw||(this._cameraDraw=new r.CameraDraw(this.glContext)),this._cameraDraw.drawCameraFrame(e,t,i,!0===n))}glContextSet(e,t){if(this.glContext)console.log("Warning - gl_context_set already called on this pipeline");else{this.glContext=e,t=t||[];for(let n=0;n<4;n++){let r=t[n]||e.createTexture();r&&(e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.videoTextures.push(r))}e.bindTexture(e.TEXTURE_2D,null),delete this._cameraDraw,delete this._faceDraw,delete this._faceProjectDraw}}drawFace(e,t,n,r){if(!this.glContext)return;this._faceDraw||(this._faceDraw=new o.FaceDraw(this.glContext));let a=i.mat4.create();i.mat4.multiply(a,e,t),i.mat4.multiply(a,a,n),this._faceDraw.drawFace(a,r)}drawFaceProject(e,t,n,r,i,a){this.glContext&&(this._faceProjectDraw||(this._faceProjectDraw=new s.FaceDrawProject(this.glContext)),this._faceProjectDraw.drawFace(e,t,n,r,i,a))}cameraFrameTexture(){var e;return null===(e=this.getCurrentCameraInfo())||void 0===e?void 0:e.texture}cameraFrameTextureMatrix(e,t,n){let a=this.getCurrentCameraInfo();return a?r.cameraFrameTextureMatrix(a.dataWidth,a.dataHeight,e,t,a.uvTransform,n):i.mat4.create()}cameraFrameUserFacing(){var e;return(null===(e=this.getCurrentCameraInfo())||void 0===e?void 0:e.userFacing)||!1}cameraPoseWithAttitude(e){let t=f(this.getCurrentCameraInfo(),this._client.pipeline_camera_frame_camera_attitude(this._impl));if(e){let e=i.mat4.create();i.mat4.fromScaling(e,[-1,1,1]),i.mat4.multiply(t,e,t),i.mat4.multiply(t,t,e)}return i.mat4.invert(t,t),t}processGL(){if(!this.glContext)return void console.log("No GL context for camera frames - please call gl_context_set");if(!this.currentCameraSource)return;if(this.tokensInFlight>0)return void this.currentCameraSource.getFrame(!0);let e=this.currentCameraSource.getFrame(!1);if(!e)return;let t=this.nextCameraToken++;this.cameraTokens.set(t,e);let n={d:e.data,p:this._impl,width:e.dataWidth,height:e.dataHeight,token:t,userFacing:e.userFacing,t:"cameraFrameC2S"};this.tokensInFlight++,this._mgr.postOutgoingMessage(n,[e.data])}motionAccelerometerSubmit(e,t,n,r){this._client.pipeline_motion_accelerometer_submit(this._impl,e,t,n,r)}motionRotationRateSubmit(e,t,n,r){this._client.pipeline_motion_rotation_rate_submit(this._impl,e,t,n,r)}motionAttitudeSubmit(e,t,n,r){this._client.pipeline_motion_attitude_submit(this._impl,e,t,n,r)}}function f(e,t){let n=!1;n=!!e&&e.userFacing;let r=i.mat4.create();return i.mat4.fromRotation(r,a.cameraRotationForScreenOrientation(n)*Math.PI/180,[0,0,1]),i.mat4.multiply(r,r,t),r}t.Pipeline=c,t.applyScreenCounterRotation=f},function(e,t,n){var r;
